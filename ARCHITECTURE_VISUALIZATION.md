# Architecture Visualization - Flight Buddy Clean Architecture

## ğŸ¢ Complete Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ¨ PRESENTATION LAYER                          â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              ğŸ“± UI SCREENS (Riverpod)                       â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚   Login      â”‚  â”‚   Search     â”‚  â”‚Flight Resultsâ”‚    â”‚ â”‚
â”‚  â”‚  â”‚   Screen     â”‚â†’ â”‚   Screen     â”‚â†’ â”‚   Screen     â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚         â†“                                    â†“             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚    Seats     â”‚â† â”‚   Booking    â”‚â† â”‚  Payment     â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  Selection   â”‚  â”‚   Details    â”‚  â”‚   Screen     â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  ğŸ’¡ All screens are ConsumerWidget/ConsumerStatefulWidget  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         ğŸ® STATE MANAGEMENT (Riverpod Providers)            â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  ref.watch() / ref.read() / ref.refresh()                  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  40+ Providers:                                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ currentUserProvider (Auth)                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ searchFlightsProvider (Search)                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ selectedFlightProvider (Selection)               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ selectedSeatsProvider (Seats)                    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ passengersProvider (Passengers)                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ paymentMethodProvider (Payment)                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Loading/Error providers                          â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚         â†“ Depends on â†“                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ’¼ DOMAIN LAYER                                â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        ğŸ¯ USE CASES (Business Logic)                       â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  Auth Use Cases      â”‚  â”‚  Flight Use Cases        â”‚   â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ LoginUseCase       â”‚  â”‚ â€¢ SearchFlightsUseCase   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ RegisterUseCase    â”‚  â”‚ â€¢ GetFlightDetailsCase   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ LogoutUseCase      â”‚  â”‚ â€¢ GetAllFlightsUseCase   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ GetCurrentUser     â”‚  â”‚ â€¢ SaveFlightLocally      â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  Booking Use Cases   â”‚  â”‚  Payment Use Cases       â”‚   â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ CreateBookingCase  â”‚  â”‚ â€¢ ProcessPaymentUseCase  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ GetUserBookings    â”‚  â”‚ â€¢ GetPaymentByBooking    â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ CancelBooking      â”‚  â”‚ â€¢ GetUserPayments        â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  15+ Use Cases Total - Each with single responsibility    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        ğŸ“Š ENTITIES (Pure Business Objects)                 â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â€¢ User          â€¢ Flight       â€¢ Booking                  â”‚ â”‚
â”‚  â”‚  â€¢ Passenger     â€¢ Payment      â€¢ Seat                     â”‚ â”‚
â”‚  â”‚  â€¢ Offer         â€¢ Notification â€¢ SearchHistory            â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  âœ¨ No framework dependencies â€¢ Type-safe â€¢ Immutable     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“ Depends on â†“                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ—„ï¸  DATA LAYER                                â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       ğŸ“‹ REPOSITORIES (Abstract Interfaces)                â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  abstract class AuthRepository              (login, etc)   â”‚ â”‚
â”‚  â”‚  abstract class FlightRepository            (search, etc)  â”‚ â”‚
â”‚  â”‚  abstract class BookingRepository           (create, etc)  â”‚ â”‚
â”‚  â”‚  abstract class PassengerRepository         (add, etc)     â”‚ â”‚
â”‚  â”‚  abstract class PaymentRepository           (process, etc) â”‚ â”‚
â”‚  â”‚  abstract class OfferRepository             (get, etc)     â”‚ â”‚
â”‚  â”‚  abstract class NotificationRepository      (notify, etc)  â”‚ â”‚
â”‚  â”‚  abstract class SearchHistoryRepository     (save, etc)    â”‚ â”‚
â”‚  â”‚  abstract class SeatRepository              (select, etc)  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  âœ¨ Each repo has clear contract â€¢ Easy to mock           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“ Implemented by â†“                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    ğŸ”§ IMPLEMENTATIONS (Hive-Based Repositories)            â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  class HiveAuthRepository        implements AuthRepo       â”‚ â”‚
â”‚  â”‚  class HiveFlightRepository      implements FlightRepo     â”‚ â”‚
â”‚  â”‚  class HiveBookingRepository     implements BookingRepo    â”‚ â”‚
â”‚  â”‚  class HivePassengerRepository   implements PassengerRepo  â”‚ â”‚
â”‚  â”‚  class HivePaymentRepository     implements PaymentRepo    â”‚ â”‚
â”‚  â”‚  class HiveOfferRepository       implements OfferRepo      â”‚ â”‚
â”‚  â”‚  class HiveNotificationRepository implements NotifRepo     â”‚ â”‚
â”‚  â”‚  class HiveSearchHistoryRepository implements SearchRepo   â”‚ â”‚
â”‚  â”‚  class HiveSeatRepository        implements SeatRepo       â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  âœ¨ All use Hive for data persistence                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       ğŸ”„ MAPPERS (Entity â†” Hive Conversion)               â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  EntityMappers.hiveUserToEntity()                          â”‚ â”‚
â”‚  â”‚  EntityMappers.entityToHiveUser()                          â”‚ â”‚
â”‚  â”‚  EntityMappers.hiveFlightToEntity()                        â”‚ â”‚
â”‚  â”‚  EntityMappers.entityToHiveFlight()                        â”‚ â”‚
â”‚  â”‚  ... (26+ mapper functions)                                â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  âœ¨ Clean separation of concerns â€¢ Type-safe conversions  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        ğŸ—‚ï¸  HIVE MODELS (@HiveType)                        â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  HiveUser (typeId: 0)                                      â”‚ â”‚
â”‚  â”‚  HiveFlight (typeId: 1)                                    â”‚ â”‚
â”‚  â”‚  HiveSeat (typeId: 2)                                      â”‚ â”‚
â”‚  â”‚  HiveBooking (typeId: 3)                                   â”‚ â”‚
â”‚  â”‚  HivePassenger (typeId: 4)                                 â”‚ â”‚
â”‚  â”‚  HiveSearchHistory (typeId: 5)                             â”‚ â”‚
â”‚  â”‚  HivePayment (typeId: 6)                                   â”‚ â”‚
â”‚  â”‚  HiveOffer (typeId: 7)                                     â”‚ â”‚
â”‚  â”‚  HiveNotification (typeId: 8)                              â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  âœ¨ Hive auto-serialization â€¢ Safe versioning             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ’¾ PERSISTENCE LAYER                           â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           ğŸ—„ï¸ HIVE LOCAL DATABASE                          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Users Box          [HiveUser ...]                         â”‚ â”‚
â”‚  â”‚  Flights Box        [HiveFlight ...]                       â”‚ â”‚
â”‚  â”‚  Bookings Box       [HiveBooking ...]                      â”‚ â”‚
â”‚  â”‚  Passengers Box     [HivePassenger ...]                    â”‚ â”‚
â”‚  â”‚  Payments Box       [HivePayment ...]                      â”‚ â”‚
â”‚  â”‚  Offers Box         [HiveOffer ...]                        â”‚ â”‚
â”‚  â”‚  Notifications Box  [HiveNotification ...]                 â”‚ â”‚
â”‚  â”‚  SearchHistory Box  [HiveSearchHistory ...]                â”‚ â”‚
â”‚  â”‚  Seats Box          [HiveSeat ...]                         â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  âœ¨ Offline-first â€¢ Fast local queries â€¢ Type-safe         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Complete Data Flow Example: Booking Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. LOGIN SCREEN (LoginScreenClean)                              â”‚
â”‚                                                                 â”‚
â”‚    User enters: email, password                                â”‚
â”‚    Triggers: _handleLogin()                                    â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. CALL AUTH REPOSITORY                                         â”‚
â”‚                                                                 â”‚
â”‚    authRepository.login(email, password)                       â”‚
â”‚    (from authRepositoryProvider)                               â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. HIVE AUTH REPOSITORY IMPLEMENTATION                          â”‚
â”‚                                                                 â”‚
â”‚    HiveAuthRepository.login():                                 â”‚
â”‚    â€¢ Get userBox (Box<HiveUser>)                               â”‚
â”‚    â€¢ Loop through stored users                                 â”‚
â”‚    â€¢ Match email                                               â”‚
â”‚    â€¢ Return HiveUser                                           â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. CONVERT TO DOMAIN ENTITY                                     â”‚
â”‚                                                                 â”‚
â”‚    EntityMappers.hiveUserToEntity(HiveUser)                    â”‚
â”‚    â€¢ Create User (domain entity)                               â”‚
â”‚    â€¢ Pure business object - no dependencies                    â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. UPDATE PROVIDER STATE                                        â”‚
â”‚                                                                 â”‚
â”‚    currentUserProvider updates                                 â”‚
â”‚    â€¢ All screens watching this provider rebuild                â”‚
â”‚    â€¢ isLoggedInProvider becomes true                           â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. UI AUTOMATICALLY UPDATES                                     â”‚
â”‚                                                                 â”‚
â”‚    All ConsumerWidget watching currentUserProvider:            â”‚
â”‚    â€¢ LoginScreenClean: Shows user profile                      â”‚
â”‚    â€¢ BottomNavScreen: Shows authenticated UI                   â”‚
â”‚    â€¢ PaymentScreen: Shows user email as default                â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. NAVIGATE TO SEARCH SCREEN (FlightSearchScreenClean)         â”‚
â”‚                                                                 â”‚
â”‚    User enters search parameters:                              â”‚
â”‚    â€¢ From: NYC                                                 â”‚
â”‚    â€¢ To: LAX                                                   â”‚
â”‚    â€¢ Date: 2025-03-15                                          â”‚
â”‚    â€¢ Passengers: 2                                             â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. TRIGGER SEARCH                                               â”‚
â”‚                                                                 â”‚
â”‚    ref.refresh(searchFlightsProvider(params))                  â”‚
â”‚    params = {                                                  â”‚
â”‚      'fromCity': 'NYC',                                        â”‚
â”‚      'toCity': 'LAX',                                          â”‚
â”‚      'departureDate': DateTime(2025, 3, 15),                   â”‚
â”‚      'passengers': 2,                                          â”‚
â”‚    }                                                           â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. CALL FLIGHT USE CASE                                         â”‚
â”‚                                                                 â”‚
â”‚    SearchFlightsUseCase.call(params)                           â”‚
â”‚    â€¢ Business logic wrapper                                    â”‚
â”‚    â€¢ Validation (optional)                                     â”‚
â”‚    â€¢ Delegates to repository                                   â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10. QUERY FLIGHT REPOSITORY                                     â”‚
â”‚                                                                 â”‚
â”‚    flightRepository.searchFlights(params)                      â”‚
â”‚    (from flightRepositoryProvider)                             â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 11. HIVE FLIGHT REPOSITORY QUERIES DATABASE                     â”‚
â”‚                                                                 â”‚
â”‚    HiveFlightRepository.searchFlights():                       â”‚
â”‚    â€¢ Get flightBox (Box<HiveFlight>)                           â”‚
â”‚    â€¢ Filter by: fromCity, toCity, departureDate               â”‚
â”‚    â€¢ Return List<HiveFlight>                                   â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 12. CONVERT TO DOMAIN ENTITIES                                  â”‚
â”‚                                                                 â”‚
â”‚    For each HiveFlight:                                        â”‚
â”‚    EntityMappers.hiveFlightToEntity()                          â”‚
â”‚    â€¢ Create Flight (domain entity)                             â”‚
â”‚    â€¢ Convert all related data                                  â”‚
â”‚    â€¢ Return List<Flight>                                       â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 13. PROVIDER RETURNS RESULTS                                    â”‚
â”‚                                                                 â”‚
â”‚    searchFlightsProvider emits:                                â”‚
â”‚    â€¢ AsyncValue.data(List<Flight>)                             â”‚
â”‚    â€¢ All watching screens receive update                       â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 14. DISPLAY RESULTS (FlightSelectionScreenClean)               â”‚
â”‚                                                                 â”‚
â”‚    reflex.watch(searchFlightsProvider(params)).when(           â”‚
â”‚      data: (flights) => ListView(flights),                     â”‚
â”‚      loading: () => CircularProgressIndicator(),               â”‚
â”‚      error: (err, st) => ErrorWidget(),                        â”‚
â”‚    )                                                           â”‚
â”‚    â€¢ Each flight displayed in card                             â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 15. USER SELECTS FLIGHT                                         â”‚
â”‚                                                                 â”‚
â”‚    ref.read(selectedFlightProvider.notifier).state = flight    â”‚
â”‚    â€¢ selectedFlightProvider updates to chosen flight           â”‚
â”‚    â€¢ All dependent providers update                            â”‚
â”‚    â€¢ Price calculation updates                                 â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 16. NAVIGATE TO SEAT SELECTION (SeatSelectionScreenClean)      â”‚
â”‚                                                                 â”‚
â”‚    Launch with: Flight object from selectedFlightProvider      â”‚
â”‚    Passenger count needed: From search params                  â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 17. USER SELECTS SEATS & CLASS                                  â”‚
â”‚                                                                 â”‚
â”‚    Selected: Seats = ['A1', 'A2'], Class = 'Economy'          â”‚
â”‚    Updates:                                                    â”‚
â”‚    â€¢ selectedSeatsProvider.notifier.state = ['A1', 'A2']      â”‚
â”‚    â€¢ selectedClassProvider.notifier.state = 'Economy'         â”‚
â”‚    â€¢ bookingTotalProvider auto-calculates price               â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 18. NAVIGATE TO BOOKING DETAILS (BookingDetailsScreenClean)    â”‚
â”‚                                                                 â”‚
â”‚    Receives:                                                   â”‚
â”‚    â€¢ flight: Flight                                            â”‚
â”‚    â€¢ selectedSeats: ['A1', 'A2']                               â”‚
â”‚    â€¢ travelClass: 'Economy'                                    â”‚
â”‚    â€¢ passengerCount: 2                                         â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 19. COLLECT PASSENGER INFO (Multi-form)                         â”‚
â”‚                                                                 â”‚
â”‚    User fills for each passenger:                              â”‚
â”‚    â€¢ First Name, Last Name                                     â”‚
â”‚    â€¢ Email, Phone                                              â”‚
â”‚    â€¢ Passport Number                                           â”‚
â”‚    â€¢ Date of Birth, Nationality                                â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 20. CREATE PASSENGER OBJECTS                                    â”‚
â”‚                                                                 â”‚
â”‚    For each form entry:                                        â”‚
â”‚    Passenger(                                                  â”‚
â”‚      id: UUID(),                                               â”‚
â”‚      firstName: 'John',                                        â”‚
â”‚      lastName: 'Doe',                                          â”‚
â”‚      email: 'john@example.com',                                â”‚
â”‚      ... (other fields)                                        â”‚
â”‚    )                                                           â”‚
â”‚    Updates: passengersProvider                                 â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 21. NAVIGATE TO PAYMENT (PaymentScreenClean)                   â”‚
â”‚                                                                 â”‚
â”‚    Shows summary:                                              â”‚
â”‚    â€¢ Flight: AI101                                             â”‚
â”‚    â€¢ Seats: A1, A2                                             â”‚
â”‚    â€¢ Passengers: 2                                             â”‚
â”‚    â€¢ Class: Economy                                            â”‚
â”‚    â€¢ Total: â‚¹300                                               â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 22. USER SELECTS PAYMENT METHOD & ENTERS DETAILS                â”‚
â”‚                                                                 â”‚
â”‚    Updates:                                                    â”‚
â”‚    â€¢ paymentMethodProvider = 'card'                            â”‚
â”‚    â€¢ Card number: 4111111111111111                             â”‚
â”‚    â€¢ Expiry: 12/25                                             â”‚
â”‚    â€¢ CVV: 123                                                  â”‚
â”‚    â€¢ Agrees to terms                                           â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 23. CLICK PAY BUTTON                                            â”‚
â”‚                                                                 â”‚
â”‚    _processPayment() triggered                                 â”‚
â”‚    â€¢ bookingLoadingProvider.state = true                       â”‚
â”‚    â€¢ Show spinner                                              â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 24. CREATE BOOKING                                              â”‚
â”‚                                                                 â”‚
â”‚    bookingRepository.createBooking(                            â”‚
â”‚      userId: currentUser.id,                                   â”‚
â”‚      flightId: flight.id,                                      â”‚
â”‚      selectedSeats: ['A1', 'A2'],                              â”‚
â”‚      travelClass: 'Economy',                                   â”‚
â”‚      passengers: [Passenger(...), Passenger(...)],             â”‚
â”‚      totalPrice: 300.0,                                        â”‚
â”‚    )                                                           â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 25. HIVE BOOKING REPOSITORY SAVES                               â”‚
â”‚                                                                 â”‚
â”‚    HiveBookingRepository.createBooking():                      â”‚
â”‚    â€¢ Generate bookingId: 'BK_ABC123XZ'                         â”‚
â”‚    â€¢ Create HiveBooking object                                 â”‚
â”‚    â€¢ Add to bookingBox                                         â”‚
â”‚    â€¢ Return Booking (domain entity)                            â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 26. PROCESS PAYMENT                                             â”‚
â”‚                                                                 â”‚
â”‚    paymentRepository.processPayment(                           â”‚
â”‚      bookingId: 'BK_ABC123XZ',                                 â”‚
â”‚      amount: 300.0,                                            â”‚
â”‚      paymentMethod: 'card',                                    â”‚
â”‚    )                                                           â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 27. HIVE PAYMENT REPOSITORY PROCESSES                           â”‚
â”‚                                                                 â”‚
â”‚    HivePaymentRepository.processPayment():                     â”‚
â”‚    â€¢ Generate paymentId: 'PAY_XYZ789AB'                        â”‚
â”‚    â€¢ Create HivePayment object                                 â”‚
â”‚    â€¢ Set status: 'completed'                                   â”‚
â”‚    â€¢ Add to paymentBox                                         â”‚
â”‚    â€¢ Return Payment (domain entity)                            â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 28. UPDATE BOOKING STATUS                                       â”‚
â”‚                                                                 â”‚
â”‚    Update booking:                                             â”‚
â”‚    booking.copyWith(                                           â”‚
â”‚      status: 'confirmed',                                      â”‚
â”‚      paymentDate: DateTime.now(),                              â”‚
â”‚      paymentMethod: 'card',                                    â”‚
â”‚    )                                                           â”‚
â”‚    bookingRepository.updateBooking(updated)                    â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 29. SHOW SUCCESS & NAVIGATE                                     â”‚
â”‚                                                                 â”‚
â”‚    ScaffoldMessenger.showSnackBar('Payment successful!')      â”‚
â”‚    Navigator.pushReplacementNamed(                            â”‚
â”‚      '/booking-confirmation',                                 â”‚
â”‚      arguments: {                                              â”‚
â”‚        'booking': updatedBooking,                              â”‚
â”‚        'payment': payment,                                     â”‚
â”‚      },                                                        â”‚
â”‚    )                                                           â”‚
â”‚                        â†“                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 30. BOOKING CONFIRMATION SCREEN                                 â”‚
â”‚                                                                 â”‚
â”‚    Displays:                                                   â”‚
â”‚    â€¢ Success icon âœ“                                            â”‚
â”‚    â€¢ Booking ID: BK_ABC123XZ                                   â”‚
â”‚    â€¢ Payment ID: PAY_XYZ789AB                                  â”‚
â”‚    â€¢ Flight details                                            â”‚
â”‚    â€¢ Passenger list                                            â”‚
â”‚    â€¢ Download E-ticket button                                  â”‚
â”‚    â€¢ All data from updated booking                             â”‚
â”‚                        â†“                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        âœ… DONE!
```

---

## ğŸ¯ Provider Dependency Tree

```
                    ğŸ¯ currentUserProvider
                            â†‘
                            â”‚ depends on
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
    authRepository    userBoxProvider    EntityMappers
        â”‚
        â”‚
        â”œâ”€â†’ userBox (Hive)
        â”‚
        â””â”€â†’ HiveUser
```

```
                searchFlightsProvider(params)
                        â†‘
                        â”‚ depends on
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
        â–¼               â–¼               â–¼
  flightRepository  searchParams   EntityMappers
        â”‚
        â”‚
        â”œâ”€â†’ flightBox (Hive)
        â”‚
        â””â”€â†’ HiveFlight


```

```
                bookingTotalProvider (Computed)
                        â†‘
                        â”‚ depends on
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
        â–¼               â–¼               â–¼
  selectedFlightProvider
  selectedSeatsProvider
  selectedClassProvider
```

---

## ğŸ“Š State Flow Diagram

```
User Action (Tap Button)
    â†“
ConsumerWidget.ref.read()
    â†“
StateProvider.notifier.state = newValue
    â†“
Provider emits new value
    â†“
All listening widgets notified
    â†“
.when() in build() reevaluates
    â†“
UI rebuilds with new data
    â†“
User sees updated UI


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Reactive State Management (Riverpod)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Any Provider Change â†’ All Dependents Update â†’ UI Rebuilds
```

---

## ğŸ” Data Isolation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     âŒ SHOULD NOT HAPPEN (Bad)          â”‚
â”‚                                         â”‚
â”‚  UI Screen directly accesses Hive      â”‚
â”‚  Box<HiveUser> box = Hive.box(...);    â”‚
â”‚  HiveUser user = box.getAt(0);         â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     âœ… SHOULD HAPPEN (Good)             â”‚
â”‚                                         â”‚
â”‚  UI Screen uses Repository              â”‚
â”‚  User user = await repo.getUser(id);   â”‚
â”‚                                         â”‚
â”‚  Repository uses Hive                   â”‚
â”‚  HiveUser hive = box.getAt(0);         â”‚
â”‚  User user = mapper.toEntity(hive);    â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Clean separation = Easy to test & maintain
```

---

Thanks for reviewing this architecture! ğŸ‰
